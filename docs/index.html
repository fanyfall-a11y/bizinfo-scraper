<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‚˜í˜¼ìì°½ì—… - ê³µê³  ì„ íƒ</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif; background: #f0f4ff; color: #222; }

    /* â”€â”€ ë¡œê·¸ì¸ â”€â”€ */
    #login-screen {
      position: fixed; inset: 0;
      background: linear-gradient(135deg, #0d2d6e, #1a4fa0);
      display: flex; align-items: center; justify-content: center; z-index: 999;
    }
    .login-box {
      background: white; border-radius: 20px; padding: 48px 40px;
      width: 360px; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .login-box h1 { font-size: 22px; color: #1a4fa0; margin-bottom: 8px; }
    .login-box p { font-size: 14px; color: #888; margin-bottom: 28px; }
    .login-box input {
      width: 100%; padding: 14px 16px; border: 2px solid #dde4f5;
      border-radius: 10px; font-size: 16px; margin-bottom: 14px;
      outline: none; text-align: center; letter-spacing: 4px;
    }
    .login-box input:focus { border-color: #1a4fa0; }
    .login-btn {
      width: 100%; padding: 14px; background: #1a4fa0; color: white;
      border: none; border-radius: 10px; font-size: 16px; font-weight: 700; cursor: pointer;
    }
    .login-btn:hover { background: #0d2d6e; }
    .login-error { color: #e53e3e; font-size: 14px; margin-top: 10px; display: none; }

    /* â”€â”€ ë©”ì¸ â”€â”€ */
    #main-screen { display: none; min-height: 100vh; }

    header {
      background: linear-gradient(90deg, #0d2d6e, #1a4fa0);
      padding: 14px 20px; color: white;
      display: flex; align-items: center; justify-content: space-between;
      position: sticky; top: 0; z-index: 100;
    }
    header h1 { font-size: 17px; font-weight: 800; }
    .header-right { font-size: 13px; opacity: 0.85; }

    .layout { display: flex; gap: 0; min-height: calc(100vh - 50px); }

    /* â”€â”€ ì™¼ìª½: ê³µê³  ëª©ë¡ â”€â”€ */
    .list-panel { flex: 1; min-width: 0; padding: 16px 16px 120px; }

    /* ë‚ ì§œ íƒ­ */
    .date-tabs {
      background: white; border-radius: 12px; padding: 12px 14px;
      margin-bottom: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.07);
      overflow-x: auto; white-space: nowrap;
    }
    .date-tabs::-webkit-scrollbar { height: 3px; }
    .date-tabs::-webkit-scrollbar-thumb { background: #c0d0f0; border-radius: 3px; }
    .date-tab {
      display: inline-block; padding: 7px 14px; border-radius: 18px;
      font-size: 13px; font-weight: 600; cursor: pointer;
      border: 2px solid #e0e8f8; color: #666; background: white;
      margin-right: 6px; transition: all 0.15s;
    }
    .date-tab:hover { border-color: #1a4fa0; color: #1a4fa0; }
    .date-tab.active { background: #1a4fa0; color: white; border-color: #1a4fa0; }
    .date-tab .tab-cnt { font-size: 11px; opacity: 0.8; margin-left: 3px; }
    .date-tab.no-data { opacity: 0.35; cursor: default; }

    /* ì¶œì²˜ íƒ­ */
    .source-tabs {
      background: white; border-radius: 12px; padding: 10px 14px;
      margin-bottom: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.07);
      display: flex; gap: 8px; flex-wrap: wrap;
    }
    .source-tab {
      padding: 7px 14px; border-radius: 18px; font-size: 13px; font-weight: 700;
      cursor: pointer; border: 2px solid #e0e8f8; color: #666; background: white;
      transition: all 0.15s; display: flex; align-items: center; gap: 5px;
    }
    .source-tab:hover { border-color: var(--color); color: var(--color); }
    .source-tab.active { background: var(--color); color: white; border-color: var(--color); }
    .source-tab .src-cnt { font-size: 11px; opacity: 0.85; }

    /* í•„í„° */
    .filter-wrap {
      background: white; border-radius: 12px; padding: 12px 14px;
      margin-bottom: 12px; box-shadow: 0 2px 10px rgba(0,0,0,0.07);
    }
    .filter-row { display: flex; align-items: center; gap: 6px; margin-bottom: 8px; flex-wrap: wrap; }
    .filter-row:last-child { margin-bottom: 0; }
    .filter-label { font-size: 11px; font-weight: 700; color: #999; min-width: 30px; }
    .filter-chip {
      padding: 4px 10px; border-radius: 14px; font-size: 12px; font-weight: 600;
      cursor: pointer; border: 1.5px solid #e0e8f8; color: #666; background: white;
      transition: all 0.15s;
    }
    .filter-chip:hover { border-color: #1a4fa0; color: #1a4fa0; }
    .filter-chip.active { background: #1a4fa0; color: white; border-color: #1a4fa0; }

    /* ëª©ë¡ í†µê³„ */
    .list-stat {
      display: flex; justify-content: space-between; align-items: center;
      padding: 8px 4px; margin-bottom: 8px;
    }
    .list-stat span { font-size: 13px; color: #666; }
    .list-stat strong { color: #1a4fa0; }

    /* ê³µê³  ì¹´ë“œ */
    .item-card {
      background: white; border-radius: 14px; padding: 14px 16px;
      margin-bottom: 9px; display: flex; align-items: flex-start; gap: 11px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.06); cursor: pointer;
      border: 2px solid transparent; transition: all 0.15s;
    }
    .item-card:hover { border-color: #a0b8f0; transform: translateY(-1px); }
    .item-card.selected { border-color: #1a4fa0; background: #f0f5ff; }
    .item-card.is-target { border-left: 4px solid #f0a500; }
    .item-card.is-target.selected { border-color: #1a4fa0; border-left: 4px solid #1a4fa0; background: #f0f5ff; }

    .item-card input[type=checkbox] {
      width: 18px; height: 18px; margin-top: 2px; flex-shrink: 0;
      accent-color: #1a4fa0; cursor: pointer;
    }
    .item-body { flex: 1; min-width: 0; }

    .badge-row { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 6px; }
    .badge {
      display: inline-flex; align-items: center; gap: 3px;
      font-size: 11px; font-weight: 700; padding: 2px 8px; border-radius: 10px;
    }
    .badge-target  { background: #fff8e1; color: #c17900; border: 1px solid #ffd54f; }
    .badge-cat     { background: #e8f4fd; color: #1565c0; border: 1px solid #90caf9; }
    .badge-region  { background: #e8f5e9; color: #2e7d32; border: 1px solid #a5d6a7; }
    .badge-source  { background: #f3e5f5; color: #7b1fa2; border: 1px solid #ce93d8; }

    .item-title { font-size: 14px; font-weight: 600; line-height: 1.5; color: #1a2a4a; margin-bottom: 4px; }
    .item-meta  { font-size: 12px; color: #aaa; }

    .empty-msg {
      text-align: center; padding: 50px 20px; color: #888;
      background: white; border-radius: 14px; box-shadow: 0 2px 10px rgba(0,0,0,0.06);
    }
    .empty-msg p { font-size: 17px; margin-bottom: 6px; }

    /* â”€â”€ ì˜¤ë¥¸ìª½: ì¥ë°”êµ¬ë‹ˆ â”€â”€ */
    .cart-panel {
      width: 300px; flex-shrink: 0;
      background: white; border-left: 1px solid #e0e8f8;
      display: flex; flex-direction: column;
      position: sticky; top: 50px; height: calc(100vh - 50px);
      overflow: hidden;
    }
    .cart-header {
      padding: 16px 18px; border-bottom: 1px solid #e0e8f8;
      display: flex; align-items: center; justify-content: space-between;
    }
    .cart-header h2 { font-size: 15px; font-weight: 800; color: #1a2a4a; }
    .cart-count-badge {
      background: #1a4fa0; color: white; font-size: 12px; font-weight: 700;
      padding: 2px 9px; border-radius: 12px;
    }
    .cart-body { flex: 1; overflow-y: auto; padding: 12px 14px; }
    .cart-body::-webkit-scrollbar { width: 4px; }
    .cart-body::-webkit-scrollbar-thumb { background: #c0d0f0; border-radius: 4px; }

    .cart-empty {
      text-align: center; padding: 40px 10px; color: #bbb;
    }
    .cart-empty p { font-size: 14px; margin-top: 10px; line-height: 1.6; }

    .cart-item {
      background: #f8faff; border: 1.5px solid #e0e8f8; border-radius: 12px;
      padding: 11px 12px; margin-bottom: 8px; position: relative;
    }
    .cart-item .cart-item-badges { display: flex; flex-wrap: wrap; gap: 3px; margin-bottom: 5px; }
    .cart-item-title { font-size: 13px; font-weight: 600; color: #1a2a4a; line-height: 1.4; padding-right: 22px; }
    .cart-item-source { font-size: 11px; color: #999; margin-top: 4px; }
    .cart-remove {
      position: absolute; top: 8px; right: 8px;
      width: 20px; height: 20px; border-radius: 50%;
      background: #eee; border: none; cursor: pointer;
      font-size: 12px; color: #666; display: flex; align-items: center; justify-content: center;
      transition: background 0.15s;
    }
    .cart-remove:hover { background: #ffdddd; color: #e53e3e; }

    .cart-footer { padding: 14px; border-top: 1px solid #e0e8f8; }
    .cart-limit { font-size: 12px; color: #aaa; text-align: center; margin-bottom: 10px; }
    .generate-btn {
      width: 100%; padding: 14px; border: none; border-radius: 12px;
      font-size: 15px; font-weight: 700; cursor: pointer; transition: all 0.2s;
      background: #e0e8f8; color: #999;
    }
    .generate-btn.active { background: #1a4fa0; color: white; }
    .generate-btn.active:hover { background: #0d2d6e; }

    /* â”€â”€ ëª¨ë‹¬ â”€â”€ */
    #modal {
      position: fixed; inset: 0; background: rgba(0,0,0,0.5);
      display: none; align-items: center; justify-content: center; z-index: 500;
    }
    #modal.show { display: flex; }
    .modal-box {
      background: white; border-radius: 20px; padding: 36px;
      text-align: center; width: 320px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .modal-icon { font-size: 44px; margin-bottom: 12px; }
    .modal-box h2 { font-size: 18px; margin-bottom: 10px; color: #1a2a4a; }
    .modal-box p { font-size: 13px; color: #666; line-height: 1.7; white-space: pre-line; }
    .modal-close {
      margin-top: 20px; padding: 10px 28px; background: #1a4fa0; color: white;
      border: none; border-radius: 10px; font-size: 14px; cursor: pointer; display: none;
    }

    /* í† í° ì…ë ¥ ëª¨ë‹¬ */
    #token-modal {
      position: fixed; inset: 0; background: rgba(0,0,0,0.5);
      display: none; align-items: center; justify-content: center; z-index: 600;
    }
    #token-modal.show { display: flex; }
    .token-modal-box {
      background: white; border-radius: 20px; padding: 32px 28px;
      width: 340px; box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    .token-modal-box h3 { font-size: 16px; color: #1a2a4a; margin-bottom: 6px; }
    .token-modal-box p  { font-size: 12px; color: #888; margin-bottom: 14px; line-height: 1.6; }
    .token-modal-box input {
      width: 100%; box-sizing: border-box;
      border: 1.5px solid #c8d8f0; border-radius: 10px;
      padding: 10px 12px; font-size: 13px; font-family: monospace;
      outline: none; margin-bottom: 14px;
    }
    .token-modal-box input:focus { border-color: #1a4fa0; }
    .token-modal-btns { display: flex; gap: 8px; justify-content: flex-end; }
    .token-modal-btns button {
      padding: 9px 20px; border: none; border-radius: 10px;
      font-size: 13px; cursor: pointer;
    }
    .token-btn-cancel { background: #f0f0f0; color: #555; }
    .token-btn-ok     { background: #1a4fa0; color: white; }

    /* ë°˜ì‘í˜• */
    @media (max-width: 700px) {
      .cart-panel { display: none; }
      .list-panel { padding-bottom: 160px; }
    }

    /* â”€â”€ ìƒì„¸ íˆ´íŒ â”€â”€ */
    #detail-tooltip {
      position: fixed;
      background: white;
      border-radius: 14px;
      padding: 16px 18px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.18);
      width: 290px;
      z-index: 400;
      border: 1.5px solid #c0d0f0;
      pointer-events: auto;
      display: none;
      font-size: 13px;
      line-height: 1.6;
      max-height: 80vh;
      overflow-y: auto;
    }
    #detail-tooltip::-webkit-scrollbar { width: 4px; }
    #detail-tooltip::-webkit-scrollbar-thumb { background: #c0d0f0; border-radius: 4px; }
    .tooltip-title {
      font-size: 13px; font-weight: 700; color: #1a2a4a;
      margin-bottom: 10px; line-height: 1.45;
      padding-bottom: 10px; border-bottom: 1px solid #eef1f8;
    }
    .tooltip-meta-row {
      display: flex; align-items: center; gap: 7px; margin-bottom: 6px;
    }
    .tooltip-meta-label {
      font-size: 11px; font-weight: 700; color: white;
      background: #1a4fa0; padding: 2px 7px; border-radius: 8px;
      flex-shrink: 0; min-width: 36px; text-align: center;
    }
    .tooltip-meta-value { color: #444; font-size: 12px; }
    .tooltip-section { margin-top: 10px; }
    .tooltip-section-label {
      font-size: 11px; font-weight: 700; color: #1a4fa0;
      margin-bottom: 4px; display: flex; align-items: center; gap: 4px;
    }
    .tooltip-section-value {
      color: #555; font-size: 12px; background: #f7f9ff;
      padding: 8px 10px; border-radius: 8px; border: 1px solid #e0e8f8;
      line-height: 1.65; white-space: pre-line;
    }
    .tooltip-no-detail { font-size: 11px; color: #bbb; margin-top: 8px; font-style: italic; }
    .tooltip-link {
      display: block; margin-top: 12px; padding: 9px 12px;
      background: #1a4fa0; color: white; text-decoration: none;
      border-radius: 9px; text-align: center; font-size: 12px; font-weight: 700;
      transition: background 0.15s;
    }
    .tooltip-link:hover { background: #0d2d6e; }
  </style>
</head>
<body>

<!-- ë¡œê·¸ì¸ -->
<div id="login-screen">
  <div class="login-box">
    <h1>ğŸ”· ë‚˜í˜¼ìì°½ì—…</h1>
    <p>ì§€ì›ì‚¬ì—… ê³µê³  ì„ íƒ ì‹œìŠ¤í…œ</p>
    <input type="password" id="pw-input" placeholder="ë¹„ë°€ë²ˆí˜¸" onkeydown="if(event.key==='Enter')login()">
    <button class="login-btn" onclick="login()">ë¡œê·¸ì¸</button>
    <div class="login-error" id="login-error">ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.</div>
  </div>
</div>

<!-- ë©”ì¸ -->
<div id="main-screen">
  <header>
    <h1>ğŸ”· ë‚˜í˜¼ìì°½ì—… ê³µê³  ì„ íƒ</h1>
    <div class="header-right" id="header-date"></div>
  </header>

  <div class="layout">
    <!-- ì™¼ìª½: ëª©ë¡ -->
    <div class="list-panel">

      <!-- ë‚ ì§œ íƒ­ -->
      <div class="date-tabs" id="date-tabs"></div>

      <!-- ì¶œì²˜ íƒ­ -->
      <div class="source-tabs" id="source-tabs"></div>

      <!-- í•„í„° -->
      <div class="filter-wrap">
        <div class="filter-row">
          <span class="filter-label">ë¶„ì•¼</span>
          <div id="cat-filters" style="display:flex;flex-wrap:wrap;gap:5px;"></div>
        </div>
        <div class="filter-row">
          <span class="filter-label">ì§€ì—­</span>
          <div id="reg-filters" style="display:flex;flex-wrap:wrap;gap:5px;"></div>
        </div>
        <div class="filter-row">
          <span class="filter-label">ëŒ€ìƒ</span>
          <button class="filter-chip active" id="f-all" onclick="setTargetFilter('all')">ì „ì²´</button>
          <button class="filter-chip" id="f-target" onclick="setTargetFilter('target')">â­ ì¶”ì²œë§Œ</button>
        </div>
      </div>

      <!-- í†µê³„ -->
      <div class="list-stat">
        <span id="list-stat-text">ê³µê³ ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
      </div>

      <!-- ê³µê³  ëª©ë¡ -->
      <div id="item-list"></div>
    </div>

    <!-- ì˜¤ë¥¸ìª½: ì¥ë°”êµ¬ë‹ˆ -->
    <div class="cart-panel">
      <div class="cart-header">
        <h2>ğŸ›’ ì„ íƒí•œ ê³µê³ </h2>
        <span class="cart-count-badge" id="cart-count">0</span>
      </div>
      <div class="cart-body" id="cart-body">
        <div class="cart-empty">
          <div style="font-size:36px;">ğŸ“‹</div>
          <p>ê³µê³ ë¥¼ ì„ íƒí•˜ë©´<br>ì—¬ê¸°ì— ë‹´ê²¨ìš”</p>
        </div>
      </div>
      <div class="cart-footer">
        <div class="cart-limit" id="cart-limit">ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒ ê°€ëŠ¥</div>
        <button class="generate-btn" id="gen-btn" onclick="startGenerate()">ğŸš€ ì½˜í…ì¸  ìƒì„±</button>
        <div style="text-align:center;margin-top:8px;">
          <button id="token-reset-btn" onclick="resetToken()" style="display:none;background:none;border:none;font-size:11px;color:#bbb;cursor:pointer;text-decoration:underline;">í† í° ì´ˆê¸°í™”</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ìƒì„¸ íˆ´íŒ -->
<div id="detail-tooltip" onmouseenter="keepTooltip()" onmouseleave="hideTooltip()"></div>

<!-- í† í° ì…ë ¥ ëª¨ë‹¬ -->
<div id="token-modal">
  <div class="token-modal-box">
    <h3>ğŸ”‘ GitHub Token ì…ë ¥</h3>
    <p>ì½˜í…ì¸  ìƒì„±ì„ ìœ„í•´ GitHub Personal Access Tokenì´ í•„ìš”í•´ìš”.<br>
       ì…ë ¥í•œ í† í°ì€ ì´ ê¸°ê¸°ì˜ ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.<br>
       <small style="color:#aaa">(Settings â†’ Developer settings â†’ Personal access tokens â†’ Fine-grained tokens)</small></p>
    <input type="password" id="token-input" placeholder="github_pat_..." onkeydown="if(event.key==='Enter')confirmToken()" />
    <div class="token-modal-btns">
      <button class="token-btn-cancel" onclick="closeTokenModal()">ì·¨ì†Œ</button>
      <button class="token-btn-ok"     onclick="confirmToken()">ì €ì¥ í›„ ì‹¤í–‰</button>
    </div>
  </div>
</div>

<!-- ëª¨ë‹¬ -->
<div id="modal">
  <div class="modal-box">
    <div class="modal-icon" id="modal-icon">â³</div>
    <h2 id="modal-title">ì‹¤í–‰ ì¤‘...</h2>
    <p id="modal-desc"></p>
    <button class="modal-close" id="modal-close-btn" onclick="closeModal()">í™•ì¸</button>
  </div>
</div>

<script>
const PASSWORD = 'bizinfo2026';
const GITHUB_OWNER = 'fanyfall-a11y';
const GITHUB_REPO = 'bizinfo-scraper';

const SOURCE_INFO = {
  bizinfo:  { name: 'ê¸°ì—…ë§ˆë‹¹',    icon: 'ğŸ¢', color: '#1a4fa0' },
  kstartup: { name: 'K-Startup',  icon: 'ğŸš€', color: '#e8360e' },
  sbiz:     { name: 'ì†Œìƒê³µì¸ë§ˆë‹¹', icon: 'ğŸª', color: '#2ecc71' },
  smtech:   { name: 'ì¤‘ì†Œê¸°ì—…ê¸°ìˆ ', icon: 'ğŸ”¬', color: '#9b59b6' },
};

const CATEGORIES = ['ì „ì²´', 'ì‚¬ì—…í™”', 'ì°½ì—…êµìœ¡', 'ì»¨ì„¤íŒ…/ë©˜í† ë§', 'ê¸€ë¡œë²Œ', 'ì‹œì„¤ì œê³µ', 'ìê¸ˆì§€ì›', 'íŒë¡œ/ë§ˆì¼€íŒ…'];
const REGIONS    = ['ì „ì²´', 'ì „êµ­', 'ì„œìš¸', 'ê²½ê¸°', 'ì¸ì²œ', 'ë¶€ì‚°', 'ëŒ€êµ¬', 'ëŒ€ì „', 'ê´‘ì£¼', 'ìš¸ì‚°', 'ì„¸ì¢…', 'ê°•ì›', 'ì¶©ë¶', 'ì¶©ë‚¨', 'ì „ë¶', 'ì „ë‚¨', 'ê²½ë¶', 'ê²½ë‚¨', 'ì œì£¼'];

// ìƒíƒœ
let allData = {};         // { 'YYYY-MM-DD': { date, sources: { bizinfo: {items}, ... } } }
let currentDate  = '';
let currentSource = 'all';  // í˜„ì¬ ì„ íƒëœ ì¶œì²˜
let activeCategory = 'ì „ì²´';
let activeRegion   = 'ì „êµ­';  // ê¸°ë³¸ê°’ ì „êµ­ìœ¼ë¡œ ì‹œì‘
let activeTarget   = 'all';

let cart = [];        // { id, source, cleanTitle, url, category, regionCategory, isTarget }
let itemMap = {};     // id â†’ item ì „ì²´ ê°ì²´ (ë¹ ë¥¸ ì¡°íšŒìš©)

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ë¡œê·¸ì¸
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function login() {
  if (document.getElementById('pw-input').value === PASSWORD) {
    document.getElementById('login-screen').style.display = 'none';
    document.getElementById('main-screen').style.display = 'block';
    init();
  } else {
    document.getElementById('login-error').style.display = 'block';
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ì´ˆê¸°í™”
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function init() {
  document.getElementById('header-date').textContent = new Date().toLocaleDateString('ko-KR');
  if (loadToken()) document.getElementById('token-reset-btn').style.display = 'inline-block';
  renderFilters();
  await loadAllData();
}

async function loadAllData() {
  // KST ê¸°ì¤€ ë‚ ì§œ ìƒì„± (collect.jsì™€ ë™ì¼í•˜ê²Œ UTC+9 ì˜¤í”„ì…‹ ì ìš©)
  const KST_OFFSET = 9 * 60 * 60 * 1000;
  const dates = [];
  for (let i = 0; i < 7; i++) {
    const d = new Date(Date.now() + KST_OFFSET - i * 86400 * 1000);
    dates.push(d.toISOString().slice(0, 10));
  }

  // daily/ í´ë”ì—ì„œ ë‚ ì§œë³„ íŒŒì¼ ë¡œë“œ ì‹œë„
  const results = await Promise.all(dates.map(async date => {
    try {
      const res = await fetch(`daily/${date}.json?t=${Date.now()}`);
      if (res.ok) {
        const data = await res.json();
        // sources êµ¬ì¡°ê°€ ì—†ìœ¼ë©´ today-list.json êµ¬ë²„ì „ í¬ë§· ë³€í™˜
        if (!data.sources && data.items) {
          data.sources = { bizinfo: { id:'bizinfo', name:'ê¸°ì—…ë§ˆë‹¹', icon:'ğŸ¢', color:'#1a4fa0', count: data.items.length, targetCount: data.targetCount||0, items: data.items } };
        }
        return { date, data };
      }
    } catch {}
    return null;
  }));

  results.forEach(r => { if (r) allData[r.date] = r.data; });

  // daily/ ì— ì—†ìœ¼ë©´ today-list.json í´ë°±
  if (Object.keys(allData).length === 0) {
    try {
      const res = await fetch(`today-list.json?t=${Date.now()}`);
      if (res.ok) {
        const data = await res.json();
        if (data && data.date) {
          if (!data.sources && data.items) {
            data.sources = { bizinfo: { id:'bizinfo', name:'ê¸°ì—…ë§ˆë‹¹', icon:'ğŸ¢', color:'#1a4fa0', count: data.items.length, targetCount: data.targetCount||0, items: data.items } };
          }
          allData[data.date] = data;
        }
      }
    } catch {}
  }

  renderDateTabs(dates);

  const available = dates.filter(d => allData[d]);
  if (available.length > 0) {
    selectDate(available[0]);
  } else {
    document.getElementById('item-list').innerHTML =
      `<div class="empty-msg"><p>ğŸ˜´ ìˆ˜ì§‘ëœ ê³µê³ ê°€ ì—†ì–´ìš”</p><small>ìƒˆë²½ ìˆ˜ì§‘ í›„ í™•ì¸í•´ì£¼ì„¸ìš”</small></div>`;
    document.getElementById('list-stat-text').textContent = 'ë°ì´í„° ì—†ìŒ';
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ë‚ ì§œ íƒ­
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderDateTabs(dates) {
  const container = document.getElementById('date-tabs');
  container.innerHTML = dates.map(date => {
    const data = allData[date];
    const cnt  = data ? (data.total || 0) : 0;
    const noData = !data;
    const d = new Date(date);
    const label = `${d.getMonth()+1}/${d.getDate()}`;
    return `<button class="date-tab${noData?' no-data':''}" id="dtab-${date}"
      onclick="${noData?'':` selectDate('${date}')`}">${label}${!noData?`<span class="tab-cnt">${cnt}</span>`:''}</button>`;
  }).join('');
}

function selectDate(date) {
  currentDate  = date;
  currentSource = 'all';

  document.querySelectorAll('.date-tab').forEach(t => t.classList.remove('active'));
  document.getElementById(`dtab-${date}`)?.classList.add('active');

  renderSourceTabs();
  applyFilters();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ì¶œì²˜ íƒ­
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderSourceTabs() {
  const data = allData[currentDate];
  const container = document.getElementById('source-tabs');
  if (!data) { container.innerHTML = ''; return; }

  const totalCnt = data.total || 0;
  let html = `<button class="source-tab${currentSource==='all'?' active':''}"
    style="--color:#1a4fa0"
    onclick="selectSource('all')">ğŸ“Œ ì „ì²´ <span class="src-cnt">${totalCnt}</span></button>`;

  Object.entries(SOURCE_INFO).forEach(([src, info]) => {
    const srcData = data.sources?.[src];
    if (!srcData) return;
    const cnt = srcData.count || srcData.items?.length || 0;
    html += `<button class="source-tab${currentSource===src?' active':''}"
      style="--color:${info.color}"
      onclick="selectSource('${src}')">${info.icon} ${info.name} <span class="src-cnt">${cnt}</span></button>`;
  });

  container.innerHTML = html;
}

function selectSource(src) {
  currentSource = src;
  renderSourceTabs();
  applyFilters();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// í•„í„°
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderFilters() {
  const catDiv = document.getElementById('cat-filters');
  catDiv.innerHTML = CATEGORIES.map(c =>
    `<button class="filter-chip${c===activeCategory?' active':''}" onclick="setCat('${c}')">${c}</button>`
  ).join('');

  const regDiv = document.getElementById('reg-filters');
  regDiv.innerHTML = REGIONS.map(r =>
    `<button class="filter-chip${r===activeRegion?' active':''}" onclick="setReg('${r}')">${r}</button>`
  ).join('');
}

function setCat(c) { activeCategory = c; renderFilters(); applyFilters(); }
function setReg(r) { activeRegion   = r; renderFilters(); applyFilters(); }
function setTargetFilter(t) {
  activeTarget = t;
  document.getElementById('f-all').classList.toggle('active', t==='all');
  document.getElementById('f-target').classList.toggle('active', t==='target');
  applyFilters();
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// í•„í„° ì ìš© + ëª©ë¡ ë Œë”
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function getCurrentItems() {
  const data = allData[currentDate];
  if (!data) return [];

  let items = [];
  if (currentSource === 'all') {
    // ì „ì²´ íƒ­: ì‚¬ì´íŠ¸ ê°„ ì œëª© ì¤‘ë³µ ì œê±°
    const seenTitles = new Set();
    Object.values(data.sources || {}).forEach(s => {
      (s.items || []).forEach(item => {
        const key = (item.cleanTitle || item.title || '').replace(/\s+/g, ' ').trim();
        if (!seenTitles.has(key)) {
          seenTitles.add(key);
          items.push(item);
        }
      });
    });
  } else {
    items = data.sources?.[currentSource]?.items || [];
  }
  return items;
}

function applyFilters() {
  let items = getCurrentItems();

  if (activeCategory !== 'ì „ì²´') items = items.filter(i => i.category === activeCategory);
  if (activeRegion   !== 'ì „ì²´') items = items.filter(i => i.regionCategory === activeRegion);
  if (activeTarget === 'target')  items = items.filter(i => i.isTarget);

  // ì¶”ì²œ ë¨¼ì € ì •ë ¬
  items.sort((a, b) => (b.isTarget?1:0) - (a.isTarget?1:0));

  document.getElementById('list-stat-text').textContent =
    `ğŸ“‹ ${currentDate} Â· ${items.length}ê±´ í‘œì‹œ`;

  renderItemList(items);
}

function renderItemList(items) {
  const list = document.getElementById('item-list');
  if (items.length === 0) {
    list.innerHTML = `<div class="empty-msg"><p>ğŸ” í•´ë‹¹ ì¡°ê±´ì˜ ê³µê³ ê°€ ì—†ì–´ìš”</p><small>í•„í„°ë¥¼ ì¡°ì •í•´ë³´ì„¸ìš”</small></div>`;
    return;
  }

  // itemMap ì´ˆê¸°í™” í›„ ì¬ë“±ë¡ (ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œ êµ¬ì„±)
  itemMap = {};
  items.forEach((item, idx) => {
    const domId = 'item_' + idx;
    itemMap[domId] = item;
  });

  list.innerHTML = items.map((item, idx) => {
    const inCart = cart.some(c => c.id === item.id);
    const src = SOURCE_INFO[item.source] || {};
    const domId = 'item_' + idx;
    return `
    <div class="item-card${item.isTarget?' is-target':''}${inCart?' selected':''}"
         id="card-${domId}" onclick="toggleCartById('${domId}')"
         onmouseenter="showTooltip('${domId}', this)" onmouseleave="hideTooltip()">
      <input type="checkbox" ${inCart?'checked':''} onclick="event.stopPropagation();toggleCartById('${domId}')">
      <div class="item-body">
        <div class="badge-row">
          ${item.isTarget ? '<span class="badge badge-target">â­ ì¶”ì²œ</span>' : ''}
          <span class="badge badge-cat">ğŸ“‚ ${item.category||'ì‚¬ì—…í™”'}</span>
          <span class="badge badge-region">ğŸ“ ${item.regionCategory||'ì „êµ­'}</span>
          ${currentSource==='all' ? `<span class="badge badge-source">${src.icon||''} ${src.name||item.source}</span>` : ''}
        </div>
        <div class="item-title">${item.cleanTitle||item.title}</div>
        <div class="item-meta">ğŸ“… ë§ˆê° ${item.date||'-'}</div>
      </div>
    </div>`;
  }).join('');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ì¥ë°”êµ¬ë‹ˆ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// domIdë¡œ item ì¡°íšŒ í›„ í† ê¸€ (HTML ì¸ë¼ì¸ onclickì—ì„œ domIdë§Œ ì „ë‹¬)
function toggleCartById(domId) {
  const item = itemMap[domId];
  if (!item) return;

  const idx = cart.findIndex(c => c.id === item.id);
  if (idx >= 0) {
    cart.splice(idx, 1);
  } else {
    if (cart.length >= 3) {
      alert('ìµœëŒ€ 3ê°œê¹Œì§€ ì„ íƒ ê°€ëŠ¥í•´ìš”!');
      return;
    }
    cart.push(item);
  }

  // DOM ì§ì ‘ ì—…ë°ì´íŠ¸ (domIdë¥¼ ì´ë¯¸ ì•Œê³  ìˆìœ¼ë¯€ë¡œ ì—­íƒìƒ‰ ë¶ˆí•„ìš”)
  const inCart = cart.some(c => c.id === item.id);
  const card = document.getElementById(`card-${domId}`);
  const chk  = card?.querySelector('input[type=checkbox]');
  if (card) card.classList.toggle('selected', inCart);
  if (chk)  chk.checked = inCart;

  renderCart();
}

function removeFromCart(id) {
  const idx = cart.findIndex(c => c.id === id);
  if (idx >= 0) cart.splice(idx, 1);
  updateCardState(id);
  renderCart();
}

// ì¥ë°”êµ¬ë‹ˆ ì¸ë±ìŠ¤ë¡œ ì‚­ì œ (renderCartì—ì„œ onclickì— ì‚¬ìš©)
function removeFromCartByIdx(idx) {
  if (idx < 0 || idx >= cart.length) return;
  const item = cart[idx];
  cart.splice(idx, 1);

  // itemMapì—ì„œ domId ì—­íƒìƒ‰ í›„ DOM ì§ì ‘ ì—…ë°ì´íŠ¸
  const entry = Object.entries(itemMap).find(([, v]) => v.id === item.id);
  if (entry) {
    const [domId] = entry;
    const card = document.getElementById(`card-${domId}`);
    const chk  = card?.querySelector('input[type=checkbox]');
    if (card) card.classList.remove('selected');
    if (chk)  chk.checked = false;
  }

  renderCart();
}

function updateCardState(id) {
  const inCart = cart.some(c => c.id === id);
  // itemMapì—ì„œ item.idê°€ ì¼ì¹˜í•˜ëŠ” domId ì—­íƒìƒ‰
  const domId = Object.entries(itemMap).find(([, v]) => v.id === id)?.[0];
  if (!domId) return;
  const card = document.getElementById(`card-${domId}`);
  const chk  = card?.querySelector('input[type=checkbox]');
  if (card) card.classList.toggle('selected', inCart);
  if (chk)  chk.checked = inCart;
}

function renderCart() {
  const body  = document.getElementById('cart-body');
  const count = document.getElementById('cart-count');
  const limit = document.getElementById('cart-limit');
  const btn   = document.getElementById('gen-btn');

  count.textContent = cart.length;
  limit.textContent = `${cart.length}/3ê°œ ì„ íƒë¨`;
  btn.classList.toggle('active', cart.length > 0);

  if (cart.length === 0) {
    body.innerHTML = `<div class="cart-empty"><div style="font-size:36px;">ğŸ“‹</div><p>ê³µê³ ë¥¼ ì„ íƒí•˜ë©´<br>ì—¬ê¸°ì— ë‹´ê²¨ìš”</p></div>`;
    return;
  }

  body.innerHTML = cart.map((item, idx) => {
    const src = SOURCE_INFO[item.source] || {};
    const cartDomId = 'cartitem_' + idx;
    return `
    <div class="cart-item" id="${cartDomId}">
      <button class="cart-remove" onclick="removeFromCartByIdx(${idx})">âœ•</button>
      <div class="cart-item-badges">
        ${item.isTarget ? '<span class="badge badge-target">â­</span>' : ''}
        <span class="badge badge-cat">ğŸ“‚ ${item.category||'ì‚¬ì—…í™”'}</span>
        <span class="badge badge-region">ğŸ“ ${item.regionCategory||'ì „êµ­'}</span>
      </div>
      <div class="cart-item-title">${item.cleanTitle||item.title}</div>
      <div class="cart-item-source">${src.icon||''} ${src.name||item.source} Â· ë§ˆê° ${item.date||'-'}</div>
    </div>`;
  }).join('');
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ìƒì„¸ íˆ´íŒ
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let _tooltipShowTimer = null;
let _tooltipHideTimer = null;

function showTooltip(domId, cardEl) {
  clearTimeout(_tooltipShowTimer);
  clearTimeout(_tooltipHideTimer);

  _tooltipShowTimer = setTimeout(() => {
    const item = itemMap[domId];
    if (!item) return;
    const src = SOURCE_INFO[item.source] || {};
    const d = item.detail || {};

    let html = `<div class="tooltip-title">${item.cleanTitle || item.title}</div>`;

    html += `<div class="tooltip-meta-row"><span class="tooltip-meta-label">ì¶œì²˜</span><span class="tooltip-meta-value">${src.icon || ''} ${src.name || item.source}</span></div>`;
    html += `<div class="tooltip-meta-row"><span class="tooltip-meta-label">ë¶„ì•¼</span><span class="tooltip-meta-value">ğŸ“‚ ${item.category || 'ì‚¬ì—…í™”'}</span></div>`;
    html += `<div class="tooltip-meta-row"><span class="tooltip-meta-label">ì§€ì—­</span><span class="tooltip-meta-value">ğŸ“ ${item.regionCategory || 'ì „êµ­'}</span></div>`;
    html += `<div class="tooltip-meta-row"><span class="tooltip-meta-label">ë§ˆê°</span><span class="tooltip-meta-value">ğŸ“… ${item.date || '-'}</span></div>`;

    if (d.period) {
      html += `<div class="tooltip-section"><div class="tooltip-section-label">ğŸ“† ëª¨ì§‘ê¸°ê°„</div><div class="tooltip-section-value">${d.period}</div></div>`;
    }
    if (d.eligibility) {
      html += `<div class="tooltip-section"><div class="tooltip-section-label">ğŸ‘¤ ì§€ì›ìê²©</div><div class="tooltip-section-value">${d.eligibility}</div></div>`;
    }
    if (d.content) {
      html += `<div class="tooltip-section"><div class="tooltip-section-label">ğŸ’° ì§€ì›ë‚´ìš©</div><div class="tooltip-section-value">${d.content}</div></div>`;
    }
    if (d.amount) {
      html += `<div class="tooltip-section"><div class="tooltip-section-label">ğŸ’µ ì§€ì›ê·œëª¨</div><div class="tooltip-section-value">${d.amount}</div></div>`;
    }
    if (!d.period && !d.eligibility && !d.content) {
      html += `<div class="tooltip-no-detail">ğŸ“Œ ë‹¤ìŒ ìˆ˜ì§‘ë¶€í„° ìƒì„¸ ì •ë³´ê°€ í‘œì‹œë©ë‹ˆë‹¤</div>`;
    }

    html += `<a href="${item.url}" target="_blank" class="tooltip-link" onclick="event.stopPropagation()">ê³µê³  ë°”ë¡œê°€ê¸° â†’</a>`;

    const tooltip = document.getElementById('detail-tooltip');
    tooltip.innerHTML = html;

    // ìœ„ì¹˜ ê³„ì‚° (ì¹´ë“œ ì˜¤ë¥¸ìª½ â†’ ì˜¤ë¥¸ìª½ ê³µê°„ ë¶€ì¡± ì‹œ ì™¼ìª½)
    const rect = cardEl.getBoundingClientRect();
    const tipW = 290;
    const vpW = window.innerWidth;
    const vpH = window.innerHeight;

    let left = rect.right + 12;
    if (left + tipW > vpW - 10) left = rect.left - tipW - 12;
    if (left < 8) left = 8;

    let top = rect.top;
    const maxH = Math.min(tooltip.scrollHeight, vpH * 0.8);
    if (top + maxH > vpH - 10) top = vpH - maxH - 10;
    if (top < 8) top = 8;

    tooltip.style.left = left + 'px';
    tooltip.style.top  = top + 'px';
    tooltip.style.display = 'block';
  }, 280);
}

function hideTooltip() {
  clearTimeout(_tooltipShowTimer);
  _tooltipHideTimer = setTimeout(() => {
    document.getElementById('detail-tooltip').style.display = 'none';
  }, 180);
}

function keepTooltip() {
  clearTimeout(_tooltipHideTimer);
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ì½˜í…ì¸  ìƒì„±
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const TOKEN_KEY = 'gh_pat_bizinfo';

function loadToken() { return localStorage.getItem(TOKEN_KEY) || ''; }
function saveToken(t) { localStorage.setItem(TOKEN_KEY, t); }
function resetToken() {
  localStorage.removeItem(TOKEN_KEY);
  document.getElementById('token-reset-btn').style.display = 'none';
  showModal('ğŸ—‘ï¸', 'í† í° ì´ˆê¸°í™” ì™„ë£Œ', 'ë‹¤ìŒ ì½˜í…ì¸  ìƒì„± ì‹œ í† í°ì„ ë‹¤ì‹œ ì…ë ¥í•´ ì£¼ì„¸ìš”.', true);
}

function openTokenModal() {
  const input = document.getElementById('token-input');
  input.value = '';
  document.getElementById('token-modal').classList.add('show');
  setTimeout(() => input.focus(), 100);
}
function closeTokenModal() {
  document.getElementById('token-modal').classList.remove('show');
}
function confirmToken() {
  const t = document.getElementById('token-input').value.trim();
  if (!t) return;
  saveToken(t);
  closeTokenModal();
  document.getElementById('token-reset-btn').style.display = 'inline-block';
  runGenerate(t);
}

async function startGenerate() {
  if (cart.length === 0) return;
  const saved = loadToken();
  if (saved) {
    runGenerate(saved);
  } else {
    openTokenModal();
  }
}

async function runGenerate(token) {
  const urls = cart.map(i => i.url).join(',');
  showModal('â³', 'GitHub Actions ì‹¤í–‰ ì¤‘...', `${cart.length}ê±´ì˜ ê³µê³  ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìˆì–´ìš”.\nì™„ë£Œë˜ë©´ ì´ë©”ì¼ë¡œ ë“œë¼ì´ë¸Œ ë§í¬ê°€ ì „ì†¡ë©ë‹ˆë‹¤.`);

  try {
    const res = await fetch(`https://api.github.com/repos/${GITHUB_OWNER}/${GITHUB_REPO}/actions/workflows/generate.yml/dispatches`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${token}`,
        'Accept': 'application/vnd.github+json',
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({ ref: 'main', inputs: { target_urls: urls } })
    });

    if (res.ok || res.status === 204) {
      showModal('âœ…', 'ìƒì„± ìš”ì²­ ì™„ë£Œ!',
        `${cart.length}ê±´ì˜ ì½˜í…ì¸  ìƒì„±ì´ ì‹œì‘ëì–´ìš”.\n5~10ë¶„ í›„ ì´ë©”ì¼ë¡œ ë“œë¼ì´ë¸Œ ë§í¬ê°€ ì „ì†¡ë©ë‹ˆë‹¤.`, true);
    } else {
      const err = await res.json().catch(() => ({}));
      if (res.status === 401 || res.status === 403) {
        // í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šìœ¼ë©´ ì €ì¥ëœ ê²ƒ ì‚­ì œí•˜ê³  ë‹¤ì‹œ ì…ë ¥ ë°›ê¸°
        localStorage.removeItem(TOKEN_KEY);
        document.getElementById('token-reset-btn').style.display = 'none';
        closeModal();
        showModal('âŒ', 'í† í° ì˜¤ë¥˜', `í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šì•„ìš”.\nì €ì¥ëœ í† í°ì„ ì‚­ì œí–ˆìŠµë‹ˆë‹¤.\në‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.`, true);
      } else {
        showModal('âŒ', 'ì˜¤ë¥˜ ë°œìƒ', `GitHub API ì˜¤ë¥˜: ${err.message||res.status}`, true);
      }
    }
  } catch (e) {
    showModal('âŒ', 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜', e.message, true);
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// ëª¨ë‹¬
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showModal(icon, title, desc, showClose=false) {
  document.getElementById('modal-icon').textContent = icon;
  document.getElementById('modal-title').textContent = title;
  document.getElementById('modal-desc').textContent = desc;
  document.getElementById('modal-close-btn').style.display = showClose ? 'inline-block' : 'none';
  document.getElementById('modal').classList.add('show');
}
function closeModal() { document.getElementById('modal').classList.remove('show'); }
</script>
</body>
</html>
